<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Color Match Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #0a0a2a;
            overflow: hidden;
            position: relative;
            color: white;
        }
        #game-container, #chat-container {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
            z-index: 10;
        }
        #chat-container {
            display: none;
            width: 300px;
            height: 400px;
            flex-direction: column;
        }
        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            text-align: left;
            padding: 10px;
            margin-bottom: 10px;
        }
        #user-input {
            display: flex;
        }
        #user-input input {
            flex-grow: 1;
            padding: 5px;
            border: none;
            border-radius: 5px 0 0 5px;
        }
        #user-input button {
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        .message {
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 5px;
        }
        .user {
            background-color: rgba(100, 100, 255, 0.3);
            text-align: right;
        }
        .bot {
            background-color: rgba(100, 255, 100, 0.3);
        }
        #color-word {
            font-size: 48px;
            margin-bottom: 20px;
        }
        button {
            font-size: 18px;
            margin: 0 10px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #timer, #score {
            font-size: 24px;
            margin-top: 20px;
        }
        .home-button {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 5px 10px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            z-index: 20;
        }
        .home-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 3px 1px white;
        }
        .nebula {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(100,0,255,0.2) 0%, rgba(100,0,255,0) 70%);
            opacity: 0.5;
            animation: nebula-move 60s infinite alternate;
        }
        @keyframes nebula-move {
            0% { transform: translate(-10%, -10%); }
            100% { transform: translate(10%, 10%); }
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-button">Home</a>
    <div class="nebula"></div>
    <div id="game-container">
        <h1>Space Color Match</h1>
        <div id="color-word">Color</div>
        <button id="match-btn">Match</button>
        <button id="no-match-btn">No Match</button>
        <button id="reset-btn">Reset</button>
        <div id="timer">Time: 30s</div>
        <div id="score">Score: 0</div>
    </div>
    <div id="chat-container">
        <div id="chat-messages"></div>
        <div id="user-input">
            <input type="text" id="user-message" placeholder="Type your message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        const colorWord = document.getElementById('color-word');
        const matchBtn = document.getElementById('match-btn');
        const noMatchBtn = document.getElementById('no-match-btn');
        const resetBtn = document.getElementById('reset-btn');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');

        const colors = ['red', 'blue', 'green', 'purple', 'orange'];
        let score = 0;
        let timeLeft = 30;
        let timerInterval;
        let gameActive = false;

        function startGame() {
            score = 0;
            timeLeft = 30;
            gameActive = true;
            updateScore();
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);
            newRound();
            enableButtons(true);
        }

        function newRound() {
            if (!gameActive) return;
            const wordIndex = Math.floor(Math.random() * colors.length);
            const colorIndex = Math.floor(Math.random() * colors.length);
            colorWord.textContent = colors[wordIndex];
            colorWord.style.color = colors[colorIndex];
        }

        function checkMatch(isMatch) {
            if (!gameActive) return;
            const actualMatch = colorWord.textContent.toLowerCase() === colorWord.style.color;
            if (isMatch === actualMatch) {
                score++;
            }
            updateScore();
            newRound();
        }

        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }

        function updateTimer() {
            timerDisplay.textContent = `Time: ${timeLeft}s`;
            if (timeLeft <= 0) {
                endGame();
            } else {
                timeLeft--;
            }
        }

        function endGame() {
            gameActive = false;
            clearInterval(timerInterval);
            colorWord.textContent = "Game Over!";
            colorWord.style.color = "white";
            enableButtons(false);
            showChatInterface();
        }

        function enableButtons(enable) {
            matchBtn.disabled = !enable;
            noMatchBtn.disabled = !enable;
        }

        matchBtn.addEventListener('click', () => checkMatch(true));
        noMatchBtn.addEventListener('click', () => checkMatch(false));
        resetBtn.addEventListener('click', startGame);

        function showChatInterface() {
            document.getElementById('game-container').style.display = 'none';
            document.getElementById('chat-container').style.display = 'flex';
            addMessage("Great job on completing the Color Match game! Your final score was " + score + ". How do you feel the game has helped you? For example, do you think it improved your reaction time or concentration?", 'bot');
        }

        const chatMessages = document.getElementById('chat-messages');
        const userMessageInput = document.getElementById('user-message');

        function sendMessage() {
            const userMessage = userMessageInput.value.trim();
            if (userMessage) {
                addMessage(userMessage, 'user');
                const botReply = getBotReply(userMessage);
                setTimeout(() => addMessage(botReply, 'bot'), 500);
                userMessageInput.value = '';
            }
        }

        function addMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender);
            messageElement.textContent = message;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getBotReply(userMessage) {
            if (userMessage.toLowerCase().includes('reaction time')) {
                return "You're right! The Color Match game is designed to improve reaction time. Quick decision-making is crucial in many real-life situations, including sports and driving.";
            } else if (userMessage.toLowerCase().includes('concentration')) {
                return "Absolutely! This game helps enhance concentration and focus. These skills are valuable in many aspects of life, from studying to performing complex tasks at work.";
            } else if (userMessage.toLowerCase().includes('difficult') || userMessage.toLowerCase().includes('hard')) {
                return "It's normal to find the game challenging at first. As you practice, you'll likely see improvement in your speed and accuracy. Remember, the difficulty is part of what makes it effective for cognitive training!";
            } else if (userMessage.toLowerCase().includes('fun') || userMessage.toLowerCase().includes('enjoy')) {
                return "I'm glad you enjoyed the game! Having fun while training your brain is a great way to stay motivated and see consistent improvement over time.";
            } else {
                return "That's an interesting perspective! The Color Match game is designed to improve various cognitive skills including reaction time, concentration, and decision-making. These skills can be beneficial in many areas of life. Is there a specific aspect of the game you'd like to discuss further?";
            }
        }

        userMessageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Add stars
        for (let i = 0; i < 50; i++) {
            let star = document.createElement('div');
            star.className = 'star';
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            document.body.appendChild(star);
        }

        // Start the game
        startGame();
    </script>
</body>
</html>
